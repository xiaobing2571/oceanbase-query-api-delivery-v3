2025-05-18 00:14:09.844 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 00:14:09.848 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Shutdown initiated...
2025-05-18 00:14:09.849 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Shutdown completed.
2025-05-18 00:14:47.112 [main] INFO  c.o.query.api.DemoApplication - Starting DemoApplication using Java 17.0.10 on Bingxiao with PID 25948 (E:\workspace\oceanbase-query-api-delivery-v3\target\classes started by Administrator in E:\workspace\oceanbase-query-api-delivery-v3)
2025-05-18 00:14:47.113 [main] INFO  c.o.query.api.DemoApplication - The following 1 profile is active: "dev"
2025-05-18 00:14:47.575 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 00:14:47.616 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 5 JPA repository interfaces.
2025-05-18 00:14:47.898 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 00:14:47.903 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 00:14:47.903 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-05-18 00:14:47.984 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-18 00:14:47.984 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 850 ms
2025-05-18 00:14:48.117 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 00:14:48.145 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2025-05-18 00:14:48.229 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-18 00:14:48.282 [main] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Starting...
2025-05-18 00:14:49.073 [main] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Start completed.
2025-05-18 00:14:49.080 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-18 00:14:49.380 [main] DEBUG org.hibernate.SQL - drop table if exists async_task
2025-05-18 00:14:49.604 [main] DEBUG org.hibernate.SQL - drop table if exists datasource_config
2025-05-18 00:14:49.762 [main] DEBUG org.hibernate.SQL - drop table if exists query_scene
2025-05-18 00:14:49.936 [main] DEBUG org.hibernate.SQL - drop table if exists sql_template
2025-05-18 00:14:50.087 [main] DEBUG org.hibernate.SQL - drop table if exists sql_template_version
2025-05-18 00:14:50.224 [main] DEBUG org.hibernate.SQL - create table async_task (task_id varchar(64) not null, callback_url varchar(512), create_time datetime(6), error_message TEXT, request_payload TEXT, results TEXT, scene_code varchar(64), status varchar(32) not null, update_time datetime(6), primary key (task_id)) engine=InnoDB
2025-05-18 00:14:51.594 [main] DEBUG org.hibernate.SQL - create table datasource_config (id bigint not null auto_increment, create_time datetime(6), datasource_id varchar(64) not null, db_type varchar(32) not null, extra_config TEXT, password varchar(128), update_time datetime(6), url varchar(255) not null, username varchar(64), primary key (id)) engine=InnoDB
2025-05-18 00:14:52.825 [main] DEBUG org.hibernate.SQL - create table query_scene (id bigint not null auto_increment, create_time datetime(6), description longtext, scene_code varchar(64) not null, scene_name varchar(128), template_ids TEXT, primary key (id)) engine=InnoDB
2025-05-18 00:14:53.460 [main] DEBUG org.hibernate.SQL - create table sql_template (id bigint not null auto_increment, create_time datetime(6), db_type varchar(32) not null, description longtext, parameters TEXT, scene_code varchar(64) not null, template_id varchar(64) not null, update_time datetime(6), primary key (id)) engine=InnoDB
2025-05-18 00:14:54.518 [main] DEBUG org.hibernate.SQL - create table sql_template_version (id bigint not null auto_increment, sql_text TEXT not null, template_id varchar(64) not null, version_condition varchar(64) not null, primary key (id)) engine=InnoDB
2025-05-18 00:14:55.663 [main] DEBUG org.hibernate.SQL - alter table datasource_config add constraint uk_datasource_id unique (datasource_id)
2025-05-18 00:14:58.059 [main] DEBUG org.hibernate.SQL - alter table query_scene add constraint uk_scene_code unique (scene_code)
2025-05-18 00:15:00.199 [main] DEBUG org.hibernate.SQL - alter table sql_template add constraint uk_template_id unique (template_id)
2025-05-18 00:15:02.205 [main] DEBUG org.hibernate.SQL - create index idx_template_id_version on sql_template_version (template_id, version_condition)
2025-05-18 00:15:04.319 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-18 00:15:04.327 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 00:15:04.897 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-05-18 00:15:04.927 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-18 00:15:04.937 [main] INFO  c.o.query.api.DemoApplication - Started DemoApplication in 18.038 seconds (JVM running for 18.466)
2025-05-18 00:15:04.940 [main] INFO  c.o.q.api.config.TestDataInitializer - 开始初始化测试数据...
2025-05-18 00:15:13.735 [main] INFO  c.o.q.api.config.TestDataInitializer - 测试数据初始化完成！
2025-05-18 00:15:13.847 [RMI TCP Connection(3)-192.168.238.1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 00:15:13.847 [RMI TCP Connection(3)-192.168.238.1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-18 00:15:13.848 [RMI TCP Connection(3)-192.168.238.1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-18 00:18:11.192 [http-nio-8080-exec-1] INFO  c.o.q.a.c.DatasourceController - Received request to test datasource connection: direct
2025-05-18 00:18:11.652 [http-nio-8080-exec-1] INFO  c.o.q.a.s.impl.DatasourceServiceImpl - 数据源连接测试成功: jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx
2025-05-18 00:18:58.861 [http-nio-8080-exec-4] INFO  c.o.q.a.c.DatasourceController - Received request to test datasource connection: registered
2025-05-18 00:18:58.920 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:18:59.047 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:18:59.096 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:18:59.099 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:18:59.099 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:18:59.099 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:18:59.100 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:18:59.100 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:18:59.100 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:18:59.100 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:18:59.100 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:18:59.108 [http-nio-8080-exec-4] ERROR c.o.q.a.s.impl.DatasourceServiceImpl - 测试数据源连接时发生未知错误
java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class java.lang.String (java.lang.Boolean and java.lang.String are in module java.base of loader 'bootstrap')
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at com.oceanbase.query.api.service.impl.DatasourceServiceImpl.testDatasourceConnection(DatasourceServiceImpl.java:93)
	at com.oceanbase.query.api.service.impl.DatasourceServiceImpl$$FastClassBySpringCGLIB$$56296c61.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.oceanbase.query.api.service.impl.DatasourceServiceImpl$$EnhancerBySpringCGLIB$$fd9091a0.testDatasourceConnection(<generated>)
	at com.oceanbase.query.api.controller.DatasourceController.testDatasourceConnection(DatasourceController.java:30)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:21:56.091 [http-nio-8080-exec-5] INFO  c.o.q.a.c.DatasourceController - Received request to test datasource connection: registered
2025-05-18 00:21:56.091 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:21:56.137 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:21:56.169 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:21:56.169 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:21:56.169 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:21:56.169 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:21:56.169 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:21:56.169 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:21:56.169 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:21:56.169 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:21:56.169 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:21:56.170 [http-nio-8080-exec-5] ERROR c.o.q.a.s.impl.DatasourceServiceImpl - 测试数据源连接时发生未知错误
java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class java.lang.String (java.lang.Boolean and java.lang.String are in module java.base of loader 'bootstrap')
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at com.oceanbase.query.api.service.impl.DatasourceServiceImpl.testDatasourceConnection(DatasourceServiceImpl.java:93)
	at com.oceanbase.query.api.service.impl.DatasourceServiceImpl$$FastClassBySpringCGLIB$$56296c61.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.oceanbase.query.api.service.impl.DatasourceServiceImpl$$EnhancerBySpringCGLIB$$fd9091a0.testDatasourceConnection(<generated>)
	at com.oceanbase.query.api.controller.DatasourceController.testDatasourceConnection(DatasourceController.java:30)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:21:57.999 [http-nio-8080-exec-7] INFO  c.o.q.a.c.DatasourceController - Received request to test datasource connection: registered
2025-05-18 00:21:57.999 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:21:58.080 [http-nio-8080-exec-7] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:21:58.163 [http-nio-8080-exec-7] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:21:58.163 [http-nio-8080-exec-7] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:21:58.163 [http-nio-8080-exec-7] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:21:58.163 [http-nio-8080-exec-7] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:21:58.163 [http-nio-8080-exec-7] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:21:58.163 [http-nio-8080-exec-7] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:21:58.163 [http-nio-8080-exec-7] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:21:58.163 [http-nio-8080-exec-7] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:21:58.163 [http-nio-8080-exec-7] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:21:58.164 [http-nio-8080-exec-7] ERROR c.o.q.a.s.impl.DatasourceServiceImpl - 测试数据源连接时发生未知错误
java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class java.lang.String (java.lang.Boolean and java.lang.String are in module java.base of loader 'bootstrap')
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at com.oceanbase.query.api.service.impl.DatasourceServiceImpl.testDatasourceConnection(DatasourceServiceImpl.java:93)
	at com.oceanbase.query.api.service.impl.DatasourceServiceImpl$$FastClassBySpringCGLIB$$56296c61.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.oceanbase.query.api.service.impl.DatasourceServiceImpl$$EnhancerBySpringCGLIB$$fd9091a0.testDatasourceConnection(<generated>)
	at com.oceanbase.query.api.controller.DatasourceController.testDatasourceConnection(DatasourceController.java:30)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:22:16.291 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 00:22:16.293 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Shutdown initiated...
2025-05-18 00:22:16.296 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Shutdown completed.
2025-05-18 00:22:20.599 [main] INFO  c.o.query.api.DemoApplication - Starting DemoApplication using Java 17.0.10 on Bingxiao with PID 18032 (E:\workspace\oceanbase-query-api-delivery-v3\target\classes started by Administrator in E:\workspace\oceanbase-query-api-delivery-v3)
2025-05-18 00:22:20.600 [main] INFO  c.o.query.api.DemoApplication - The following 1 profile is active: "dev"
2025-05-18 00:22:20.990 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 00:22:21.020 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-05-18 00:22:21.271 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 00:22:21.275 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 00:22:21.275 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-05-18 00:22:21.342 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-18 00:22:21.342 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 722 ms
2025-05-18 00:22:21.462 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 00:22:21.484 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2025-05-18 00:22:21.561 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-18 00:22:21.615 [main] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Starting...
2025-05-18 00:22:22.630 [main] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Start completed.
2025-05-18 00:22:22.637 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-18 00:22:22.932 [main] DEBUG org.hibernate.SQL - drop table if exists async_task
2025-05-18 00:22:23.324 [main] DEBUG org.hibernate.SQL - drop table if exists datasource_config
2025-05-18 00:22:23.648 [main] DEBUG org.hibernate.SQL - drop table if exists query_scene
2025-05-18 00:22:24.089 [main] DEBUG org.hibernate.SQL - drop table if exists sql_template
2025-05-18 00:22:25.171 [main] DEBUG org.hibernate.SQL - drop table if exists sql_template_version
2025-05-18 00:22:25.986 [main] DEBUG org.hibernate.SQL - create table async_task (task_id varchar(64) not null, callback_url varchar(512), create_time datetime(6), error_message TEXT, request_payload TEXT, results TEXT, scene_code varchar(64), status varchar(32) not null, update_time datetime(6), primary key (task_id)) engine=InnoDB
2025-05-18 00:22:26.984 [main] DEBUG org.hibernate.SQL - create table datasource_config (id bigint not null auto_increment, create_time datetime(6), datasource_id varchar(64) not null, db_type varchar(32) not null, extra_config TEXT, password varchar(128), update_time datetime(6), url varchar(255) not null, username varchar(64), primary key (id)) engine=InnoDB
2025-05-18 00:22:27.837 [main] DEBUG org.hibernate.SQL - create table query_scene (id bigint not null auto_increment, create_time datetime(6), description longtext, scene_code varchar(64) not null, scene_name varchar(128), template_ids TEXT, primary key (id)) engine=InnoDB
2025-05-18 00:22:28.725 [main] DEBUG org.hibernate.SQL - create table sql_template (id bigint not null auto_increment, create_time datetime(6), db_type varchar(32) not null, description longtext, parameters TEXT, scene_code varchar(64) not null, template_id varchar(64) not null, update_time datetime(6), primary key (id)) engine=InnoDB
2025-05-18 00:22:29.737 [main] DEBUG org.hibernate.SQL - create table sql_template_version (id bigint not null auto_increment, sql_text TEXT not null, template_id varchar(64) not null, version_condition varchar(64) not null, primary key (id)) engine=InnoDB
2025-05-18 00:22:30.587 [main] DEBUG org.hibernate.SQL - alter table datasource_config add constraint uk_datasource_id unique (datasource_id)
2025-05-18 00:22:33.295 [main] DEBUG org.hibernate.SQL - alter table query_scene add constraint uk_scene_code unique (scene_code)
2025-05-18 00:22:35.467 [main] DEBUG org.hibernate.SQL - alter table sql_template add constraint uk_template_id unique (template_id)
2025-05-18 00:22:37.873 [main] DEBUG org.hibernate.SQL - create index idx_template_id_version on sql_template_version (template_id, version_condition)
2025-05-18 00:22:39.737 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-18 00:22:39.743 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 00:22:40.326 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-05-18 00:22:40.357 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-18 00:22:40.366 [main] INFO  c.o.query.api.DemoApplication - Started DemoApplication in 19.947 seconds (JVM running for 20.272)
2025-05-18 00:22:40.370 [main] INFO  c.o.q.api.config.TestDataInitializer - 开始初始化测试数据...
2025-05-18 00:22:49.753 [main] INFO  c.o.q.api.config.TestDataInitializer - 测试数据初始化完成！
2025-05-18 00:22:49.870 [RMI TCP Connection(4)-192.168.238.1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 00:22:49.870 [RMI TCP Connection(4)-192.168.238.1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-18 00:22:49.871 [RMI TCP Connection(4)-192.168.238.1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-18 00:24:55.785 [http-nio-8080-exec-2] INFO  c.o.q.a.c.DatasourceController - Received request to test datasource connection: registered
2025-05-18 00:24:55.852 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:24:55.935 [http-nio-8080-exec-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:24:56.039 [http-nio-8080-exec-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:24:56.041 [http-nio-8080-exec-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:24:56.041 [http-nio-8080-exec-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:24:56.041 [http-nio-8080-exec-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:24:56.042 [http-nio-8080-exec-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:24:56.042 [http-nio-8080-exec-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:24:56.042 [http-nio-8080-exec-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:24:56.042 [http-nio-8080-exec-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:24:56.042 [http-nio-8080-exec-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:24:56.879 [http-nio-8080-exec-2] INFO  c.o.q.a.s.impl.DatasourceServiceImpl - 数据源连接测试成功: jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx
2025-05-18 00:35:14.084 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 00:35:14.086 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Shutdown initiated...
2025-05-18 00:35:14.089 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Shutdown completed.
2025-05-18 00:37:48.491 [main] INFO  c.o.query.api.DemoApplication - Starting DemoApplication using Java 17.0.10 on Bingxiao with PID 12400 (E:\workspace\oceanbase-query-api-delivery-v3\target\classes started by Administrator in E:\workspace\oceanbase-query-api-delivery-v3)
2025-05-18 00:37:48.493 [main] INFO  c.o.query.api.DemoApplication - The following 1 profile is active: "dev"
2025-05-18 00:37:48.861 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 00:37:48.890 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 5 JPA repository interfaces.
2025-05-18 00:37:49.131 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 00:37:49.135 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 00:37:49.135 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-05-18 00:37:49.201 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-18 00:37:49.201 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 687 ms
2025-05-18 00:37:49.316 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 00:37:49.334 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2025-05-18 00:37:49.400 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-18 00:37:49.447 [main] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Starting...
2025-05-18 00:37:49.866 [main] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Start completed.
2025-05-18 00:37:49.873 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-18 00:37:50.115 [main] DEBUG org.hibernate.SQL - drop table if exists async_task
2025-05-18 00:37:50.471 [main] DEBUG org.hibernate.SQL - drop table if exists datasource_config
2025-05-18 00:37:50.987 [main] DEBUG org.hibernate.SQL - drop table if exists query_scene
2025-05-18 00:37:51.601 [main] DEBUG org.hibernate.SQL - drop table if exists sql_template
2025-05-18 00:37:52.439 [main] DEBUG org.hibernate.SQL - drop table if exists sql_template_version
2025-05-18 00:37:53.036 [main] DEBUG org.hibernate.SQL - create table async_task (task_id varchar(64) not null, callback_url varchar(512), create_time datetime(6), error_message TEXT, request_payload TEXT, results TEXT, scene_code varchar(64), status varchar(32) not null, update_time datetime(6), primary key (task_id)) engine=InnoDB
2025-05-18 00:37:53.940 [main] DEBUG org.hibernate.SQL - create table datasource_config (id bigint not null auto_increment, create_time datetime(6), datasource_id varchar(64) not null, db_type varchar(32) not null, extra_config TEXT, password varchar(128), update_time datetime(6), url varchar(255) not null, username varchar(64), primary key (id)) engine=InnoDB
2025-05-18 00:37:54.578 [main] DEBUG org.hibernate.SQL - create table query_scene (id bigint not null auto_increment, create_time datetime(6), description longtext, scene_code varchar(64) not null, scene_name varchar(128), template_ids TEXT, primary key (id)) engine=InnoDB
2025-05-18 00:37:55.511 [main] DEBUG org.hibernate.SQL - create table sql_template (id bigint not null auto_increment, create_time datetime(6), db_type varchar(32) not null, description longtext, parameters TEXT, scene_code varchar(64) not null, template_id varchar(64) not null, update_time datetime(6), primary key (id)) engine=InnoDB
2025-05-18 00:37:56.434 [main] DEBUG org.hibernate.SQL - create table sql_template_version (id bigint not null auto_increment, sql_text TEXT not null, template_id varchar(64) not null, version_condition varchar(64) not null, primary key (id)) engine=InnoDB
2025-05-18 00:37:57.236 [main] DEBUG org.hibernate.SQL - alter table datasource_config add constraint uk_datasource_id unique (datasource_id)
2025-05-18 00:37:59.548 [main] DEBUG org.hibernate.SQL - alter table query_scene add constraint uk_scene_code unique (scene_code)
2025-05-18 00:38:01.882 [main] DEBUG org.hibernate.SQL - alter table sql_template add constraint uk_template_id unique (template_id)
2025-05-18 00:38:03.963 [main] DEBUG org.hibernate.SQL - create index idx_template_id_version on sql_template_version (template_id, version_condition)
2025-05-18 00:38:05.843 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-18 00:38:05.847 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 00:38:06.318 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-05-18 00:38:06.343 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-18 00:38:06.351 [main] INFO  c.o.query.api.DemoApplication - Started DemoApplication in 18.035 seconds (JVM running for 18.343)
2025-05-18 00:38:06.354 [main] INFO  c.o.q.api.config.TestDataInitializer - 开始初始化测试数据...
2025-05-18 00:38:14.145 [main] INFO  c.o.q.api.config.TestDataInitializer - 测试数据初始化完成！
2025-05-18 00:38:14.255 [RMI TCP Connection(3)-192.168.238.1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 00:38:14.256 [RMI TCP Connection(3)-192.168.238.1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-18 00:38:14.256 [RMI TCP Connection(3)-192.168.238.1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-05-18 00:39:01.589 [http-nio-8080-exec-1] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: cluster_status_monitor, async: false
2025-05-18 00:39:01.730 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:39:01.735 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [cluster_status_monitor]
2025-05-18 00:39:01.781 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [1]
2025-05-18 00:39:01.783 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:01.784 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [监控 OceanBase 集群的整体状态，包括租户、服务器、分区等信息]
2025-05-18 00:39:01.784 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:39:01.784 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [集群状态监控]
2025-05-18 00:39:01.784 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_cluster_info", "ob_tenant_status", "ob_server_status", "ob_partition_status"]]
2025-05-18 00:39:01.794 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:39:01.795 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:39:01.896 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:39:01.896 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:01.896 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:39:01.896 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:01.896 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:39:01.896 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:39:01.896 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:01.896 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:39:01.896 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:39:02.371 [pool-1-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:02.371 [pool-1-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:02.371 [pool-1-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:02.371 [pool-1-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:02.413 [pool-1-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_server_status]
2025-05-18 00:39:02.413 [pool-1-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_status]
2025-05-18 00:39:02.413 [pool-1-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_partition_status]
2025-05-18 00:39:02.413 [pool-1-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_cluster_info]
2025-05-18 00:39:02.454 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [1]
2025-05-18 00:39:02.454 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:02.455 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:02.455 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 集群基本信息]
2025-05-18 00:39:02.455 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "cluster_id", "type": "string", "required": false}]]
2025-05-18 00:39:02.455 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:39:02.455 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_cluster_info]
2025-05-18 00:39:02.455 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:02.457 [pool-1-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:02.458 [pool-1-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_cluster_info]
2025-05-18 00:39:02.459 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [4]
2025-05-18 00:39:02.459 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [3]
2025-05-18 00:39:02.459 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [2]
2025-05-18 00:39:02.459 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:02.459 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:02.459 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:02.459 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:02.459 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:02.459 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:02.459 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 租户状态]
2025-05-18 00:39:02.459 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 服务器状态]
2025-05-18 00:39:02.459 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "tenant_name", "type": "string", "required": false}]]
2025-05-18 00:39:02.459 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "zone", "type": "string", "required": false}, {"name": "svr_ip", "type": "string", "required": false}]]
2025-05-18 00:39:02.459 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 分区状态]
2025-05-18 00:39:02.459 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:39:02.460 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:39:02.460 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "table_id", "type": "integer", "required": false}]]
2025-05-18 00:39:02.460 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_tenant_status]
2025-05-18 00:39:02.460 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_server_status]
2025-05-18 00:39:02.460 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:02.460 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:39:02.460 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:02.460 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_partition_status]
2025-05-18 00:39:02.460 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:02.460 [pool-1-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:02.460 [pool-1-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:02.460 [pool-1-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_partition_status]
2025-05-18 00:39:02.460 [pool-1-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:02.460 [pool-1-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_server_status]
2025-05-18 00:39:02.460 [pool-1-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_status]
2025-05-18 00:39:02.554 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [2]
2025-05-18 00:39:02.554 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [6]
2025-05-18 00:39:02.554 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [8]
2025-05-18 00:39:02.554 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [4]
2025-05-18 00:39:02.555 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, svr_port, zone, status, start_service_time, stop_time, build_version FROM oceanbase.__all_server WHERE zone = IFNULL(:zone, zone) AND svr_ip = IFNULL(:svr_ip, svr_ip)]
2025-05-18 00:39:02.555 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT t.tenant_id, t.tenant_name, t.status, t.create_time, t.zone_list, ts.cpu_quota, ts.memory_quota, ts.disk_quota FROM oceanbase.__all_tenant t JOIN oceanbase.__all_tenant_stat ts ON t.tenant_id = ts.tenant_id WHERE t.tenant_id = IFNULL(:tenant_id, t.tenant_id) AND t.tenant_name = IFNULL(:tenant_name, t.tenant_name)]
2025-05-18 00:39:02.555 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, table_id, partition_id, svr_ip, svr_port, role, replica_type, status FROM oceanbase.__all_partition WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND table_id = IFNULL(:table_id, table_id)]
2025-05-18 00:39:02.555 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT * FROM oceanbase.__all_cluster WHERE cluster_id = IFNULL(:cluster_id, cluster_id)]
2025-05-18 00:39:02.555 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_server_status]
2025-05-18 00:39:02.555 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_cluster_info]
2025-05-18 00:39:02.555 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_partition_status]
2025-05-18 00:39:02.555 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:02.555 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_status]
2025-05-18 00:39:02.555 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:02.555 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:02.555 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [5]
2025-05-18 00:39:02.555 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:02.555 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [1]
2025-05-18 00:39:02.555 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [7]
2025-05-18 00:39:02.555 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [3]
2025-05-18 00:39:02.555 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, svr_port, zone, status, start_service_time, stop_time, build_version FROM oceanbase.gv$observer WHERE zone = IFNULL(:zone, zone) AND svr_ip = IFNULL(:svr_ip, svr_ip)]
2025-05-18 00:39:02.555 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT * FROM oceanbase.gv$ob_cluster WHERE cluster_id = IFNULL(:cluster_id, cluster_id)]
2025-05-18 00:39:02.555 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, table_id, partition_id, svr_ip, svr_port, role, replica_type, status FROM oceanbase.gv$partition_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND table_id = IFNULL(:table_id, table_id)]
2025-05-18 00:39:02.555 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_cluster_info]
2025-05-18 00:39:02.555 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT t.tenant_id, t.tenant_name, t.status, t.create_time, t.zone_list, ts.cpu_quota, ts.memory_quota, ts.disk_quota FROM oceanbase.gv$tenant t JOIN oceanbase.gv$tenant_stat ts ON t.tenant_id = ts.tenant_id WHERE t.tenant_id = IFNULL(:tenant_id, t.tenant_id) AND t.tenant_name = IFNULL(:tenant_name, t.tenant_name)]
2025-05-18 00:39:02.555 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_server_status]
2025-05-18 00:39:02.555 [pool-1-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:02.555 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_partition_status]
2025-05-18 00:39:02.555 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_status]
2025-05-18 00:39:02.555 [pool-1-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:02.555 [pool-1-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:02.555 [pool-1-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:02.561 [pool-1-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_cluster_info 失败: No value supplied for the SQL parameter 'cluster_id': No value registered for key 'cluster_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'cluster_id': No value registered for key 'cluster_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:02.561 [pool-1-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_server_status 失败: No value supplied for the SQL parameter 'zone': No value registered for key 'zone'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'zone': No value registered for key 'zone'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:02.561 [pool-1-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_tenant_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:02.561 [pool-1-thread-4] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_partition_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:31.589 [http-nio-8080-exec-3] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: performance_diagnosis, async: false
2025-05-18 00:39:31.680 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:39:31.681 [http-nio-8080-exec-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [performance_diagnosis]
2025-05-18 00:39:31.741 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [2]
2025-05-18 00:39:31.742 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:31.742 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [诊断 OceanBase 集群性能问题，包括慢 SQL、内存使用、CPU 使用等]
2025-05-18 00:39:31.742 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:39:31.742 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [性能诊断]
2025-05-18 00:39:31.742 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_slow_sql", "ob_memory_usage", "ob_cpu_usage", "ob_io_stats"]]
2025-05-18 00:39:31.743 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:39:31.743 [http-nio-8080-exec-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:39:31.778 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:39:31.778 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:31.778 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:39:31.778 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:31.778 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:39:31.778 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:39:31.778 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:31.778 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:39:31.778 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:39:32.390 [pool-2-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:32.390 [pool-2-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:32.390 [pool-2-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:32.390 [pool-2-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:32.522 [pool-2-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_io_stats]
2025-05-18 00:39:32.522 [pool-2-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_cpu_usage]
2025-05-18 00:39:32.522 [pool-2-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_memory_usage]
2025-05-18 00:39:32.522 [pool-2-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_slow_sql]
2025-05-18 00:39:32.564 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [7]
2025-05-18 00:39:32.564 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [5]
2025-05-18 00:39:32.564 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [6]
2025-05-18 00:39:32.564 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:32.564 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:32.564 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:32.565 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:32.565 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:32.565 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:32.565 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 慢 SQL]
2025-05-18 00:39:32.565 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 内存使用情况]
2025-05-18 00:39:32.565 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase CPU 使用情况]
2025-05-18 00:39:32.565 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": true}, {"name": "end_time", "type": "datetime", "required": true}, {"name": "threshold_ms", "type": "integer", "required": false, "default": 1000}]]
2025-05-18 00:39:32.565 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "svr_ip", "type": "string", "required": false}]]
2025-05-18 00:39:32.565 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "svr_ip", "type": "string", "required": false}]]
2025-05-18 00:39:32.565 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:39:32.565 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:39:32.565 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:39:32.565 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_slow_sql]
2025-05-18 00:39:32.565 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_memory_usage]
2025-05-18 00:39:32.565 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_cpu_usage]
2025-05-18 00:39:32.565 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:32.565 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:32.565 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:32.565 [pool-2-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:32.565 [pool-2-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:32.566 [pool-2-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:32.566 [pool-2-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_slow_sql]
2025-05-18 00:39:32.566 [pool-2-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_cpu_usage]
2025-05-18 00:39:32.566 [pool-2-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_memory_usage]
2025-05-18 00:39:32.566 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [8]
2025-05-18 00:39:32.566 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:32.566 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:32.566 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase IO 统计信息]
2025-05-18 00:39:32.566 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "svr_ip", "type": "string", "required": false}]]
2025-05-18 00:39:32.566 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:39:32.567 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_io_stats]
2025-05-18 00:39:32.567 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:32.567 [pool-2-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:32.567 [pool-2-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_io_stats]
2025-05-18 00:39:32.690 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [14]
2025-05-18 00:39:32.690 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [12]
2025-05-18 00:39:32.690 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [10]
2025-05-18 00:39:32.690 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [16]
2025-05-18 00:39:32.691 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, sql_id, plan_id, execution_id, user_name, db_name, sql_text, elapsed_time, execute_time, affected_rows, return_rows FROM oceanbase.__all_sql_audit WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND execute_time BETWEEN :start_time AND :end_time AND elapsed_time > IFNULL(:threshold_ms, 1000) ORDER BY elapsed_time DESC LIMIT 100]
2025-05-18 00:39:32.691 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, cpu_quota, cpu_used, cpu_used/cpu_quota*100 as cpu_usage_percent FROM oceanbase.__all_tenant_cpu_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip) ORDER BY cpu_usage_percent DESC]
2025-05-18 00:39:32.691 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, context, sum(used) as used, sum(total) as total FROM oceanbase.__all_memory_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip) GROUP BY svr_ip, tenant_id, tenant_name, context ORDER BY used DESC]
2025-05-18 00:39:32.691 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, file_type, read_count, read_bytes, write_count, write_bytes FROM oceanbase.__all_io_stat WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip)]
2025-05-18 00:39:32.691 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_slow_sql]
2025-05-18 00:39:32.691 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_cpu_usage]
2025-05-18 00:39:32.691 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_memory_usage]
2025-05-18 00:39:32.691 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:32.691 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_io_stats]
2025-05-18 00:39:32.691 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:32.691 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:32.691 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [9]
2025-05-18 00:39:32.691 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:32.691 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [11]
2025-05-18 00:39:32.691 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [13]
2025-05-18 00:39:32.691 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [15]
2025-05-18 00:39:32.691 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, sql_id, plan_id, execution_id, user_name, db_name, sql_text, elapsed_time, execute_time, affected_rows, return_rows FROM oceanbase.gv$ob_sql_audit WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND execute_time BETWEEN :start_time AND :end_time AND elapsed_time > IFNULL(:threshold_ms, 1000) ORDER BY elapsed_time DESC LIMIT 100]
2025-05-18 00:39:32.691 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, context, sum(used) as used, sum(total) as total FROM oceanbase.gv$memory_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip) GROUP BY svr_ip, tenant_id, tenant_name, context ORDER BY used DESC]
2025-05-18 00:39:32.691 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_slow_sql]
2025-05-18 00:39:32.691 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, file_type, read_count, read_bytes, write_count, write_bytes FROM oceanbase.gv$io_stat WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip)]
2025-05-18 00:39:32.691 [pool-2-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:32.691 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_memory_usage]
2025-05-18 00:39:32.691 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_io_stats]
2025-05-18 00:39:32.691 [pool-2-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:32.691 [pool-2-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:32.691 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, cpu_quota, cpu_used, cpu_used/cpu_quota*100 as cpu_usage_percent FROM oceanbase.gv$tenant_cpu_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip) ORDER BY cpu_usage_percent DESC]
2025-05-18 00:39:32.691 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_cpu_usage]
2025-05-18 00:39:32.691 [pool-2-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:32.692 [pool-2-thread-4] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_io_stats 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:32.692 [pool-2-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_cpu_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:32.692 [pool-2-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_memory_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:32.692 [pool-2-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 解析模板参数定义失败 for template ob_slow_sql: Unrecognized field "default" (class com.oceanbase.query.api.dto.TemplateParameterDto), not marked as ignorable (4 known properties: "expression", "type", "name", "required"])
 at [Source: (String)"[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": true}, {"name": "end_time", "type": "datetime", "required": true}, {"name": "threshold_ms", "type": "integer", "required": false, "default": 1000}]"; line: 1, column: 263] (through reference chain: java.util.ArrayList[3]->com.oceanbase.query.api.dto.TemplateParameterDto["default"])
2025-05-18 00:39:40.766 [http-nio-8080-exec-4] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: backup_recovery_monitor, async: true
2025-05-18 00:39:40.942 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:39:40.942 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [backup_recovery_monitor]
2025-05-18 00:39:41.036 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [3]
2025-05-18 00:39:41.036 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:41.036 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [监控 OceanBase 备份恢复任务的状态和进度]
2025-05-18 00:39:41.037 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:39:41.037 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [备份恢复监控]
2025-05-18 00:39:41.037 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_backup_status", "ob_backup_progress", "ob_recovery_status", "ob_recovery_progress"]]
2025-05-18 00:39:41.049 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select asynctask0_.task_id as task_id1_0_0_, asynctask0_.callback_url as callback2_0_0_, asynctask0_.create_time as create_t3_0_0_, asynctask0_.error_message as error_me4_0_0_, asynctask0_.request_payload as request_5_0_0_, asynctask0_.results as results6_0_0_, asynctask0_.scene_code as scene_co7_0_0_, asynctask0_.status as status8_0_0_, asynctask0_.update_time as update_t9_0_0_ from async_task asynctask0_ where asynctask0_.task_id=?
2025-05-18 00:39:41.049 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [77044e32-8f18-49e7-9916-bf85708c1937]
2025-05-18 00:39:41.144 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - insert into async_task (callback_url, create_time, error_message, request_payload, results, scene_code, status, update_time, task_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-05-18 00:39:41.144 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [null]
2025-05-18 00:39:41.145 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [2] as [TIMESTAMP] - [2025-05-18T00:39:41.142910800]
2025-05-18 00:39:41.146 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [3] as [VARCHAR] - [null]
2025-05-18 00:39:41.146 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [4] as [CLOB] - [{"datasourceType":"registered","datasourceConfig":null,"externalSourceId":null,"datasourceId":"ob-cluster-prod","tenant":null,"startTime":null,"endTime":null,"extraParams":{"tenantId":1001,"startTime":"2025-05-01T00:00:00Z","endTime":"2025-05-16T00:00:00Z"},"async":true,"executionTimeoutMs":null,"callbackUrl":null}]
2025-05-18 00:39:41.146 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [5] as [CLOB] - [null]
2025-05-18 00:39:41.146 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [6] as [VARCHAR] - [backup_recovery_monitor]
2025-05-18 00:39:41.146 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [7] as [VARCHAR] - [PENDING]
2025-05-18 00:39:41.146 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [8] as [TIMESTAMP] - [2025-05-18T00:39:41.039612400]
2025-05-18 00:39:41.146 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [9] as [VARCHAR] - [77044e32-8f18-49e7-9916-bf85708c1937]
2025-05-18 00:39:41.240 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select asynctask0_.task_id as task_id1_0_, asynctask0_.callback_url as callback2_0_, asynctask0_.create_time as create_t3_0_, asynctask0_.error_message as error_me4_0_, asynctask0_.request_payload as request_5_0_, asynctask0_.results as results6_0_, asynctask0_.scene_code as scene_co7_0_, asynctask0_.status as status8_0_, asynctask0_.update_time as update_t9_0_ from async_task asynctask0_ where asynctask0_.task_id=?
2025-05-18 00:39:41.240 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [77044e32-8f18-49e7-9916-bf85708c1937]
2025-05-18 00:39:41.341 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([task_id1_0_] : [VARCHAR]) - [77044e32-8f18-49e7-9916-bf85708c1937]
2025-05-18 00:39:41.343 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:39:41.343 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:39:41.444 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:39:41.445 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:41.445 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:39:41.445 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:41.445 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:39:41.445 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:39:41.445 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:41.445 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:39:41.445 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:39:41.988 [pool-3-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:41.989 [pool-3-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:41.988 [pool-3-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:41.989 [pool-3-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:42.061 [pool-3-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_recovery_progress]
2025-05-18 00:39:42.061 [pool-3-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_backup_status]
2025-05-18 00:39:42.061 [pool-3-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_backup_progress]
2025-05-18 00:39:42.061 [pool-3-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_recovery_status]
2025-05-18 00:39:42.123 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [11]
2025-05-18 00:39:42.123 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [9]
2025-05-18 00:39:42.123 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [12]
2025-05-18 00:39:42.123 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [10]
2025-05-18 00:39:42.124 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:42.124 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:42.124 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:42.124 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:42.124 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:42.124 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:42.124 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:42.124 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:39:42.124 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 恢复任务状态]
2025-05-18 00:39:42.124 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 备份任务进度]
2025-05-18 00:39:42.124 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 恢复任务进度]
2025-05-18 00:39:42.124 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 备份任务状态]
2025-05-18 00:39:42.124 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": false}, {"name": "end_time", "type": "datetime", "required": false}]]
2025-05-18 00:39:42.124 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "job_id", "type": "string", "required": false}]]
2025-05-18 00:39:42.124 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "job_id", "type": "string", "required": false}]]
2025-05-18 00:39:42.124 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": false}, {"name": "end_time", "type": "datetime", "required": false}]]
2025-05-18 00:39:42.124 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:39:42.124 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:39:42.124 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:39:42.124 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:39:42.124 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_backup_progress]
2025-05-18 00:39:42.124 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_recovery_status]
2025-05-18 00:39:42.124 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_recovery_progress]
2025-05-18 00:39:42.124 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_backup_status]
2025-05-18 00:39:42.124 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:42.124 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:42.124 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:42.124 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:39:42.125 [pool-3-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:42.125 [pool-3-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:42.125 [pool-3-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:42.125 [pool-3-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:39:42.125 [pool-3-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_recovery_status]
2025-05-18 00:39:42.125 [pool-3-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_backup_status]
2025-05-18 00:39:42.125 [pool-3-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_backup_progress]
2025-05-18 00:39:42.125 [pool-3-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_recovery_progress]
2025-05-18 00:39:42.162 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [22]
2025-05-18 00:39:42.162 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [20]
2025-05-18 00:39:42.162 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [18]
2025-05-18 00:39:42.162 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, backup_type, status, start_time, completion_time, backup_dest FROM oceanbase.__all_backup_job WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (start_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY start_time DESC]
2025-05-18 00:39:42.162 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, recovery_type, status, start_time, completion_time, backup_dest FROM oceanbase.__all_recovery_job WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (start_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY start_time DESC]
2025-05-18 00:39:42.162 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, job_id, backup_type, status, start_time, completion_time, total_bytes, finish_bytes, finish_bytes/total_bytes*100 as progress_percent FROM oceanbase.__all_backup_progress WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND job_id = IFNULL(:job_id, job_id) ORDER BY start_time DESC]
2025-05-18 00:39:42.162 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_recovery_status]
2025-05-18 00:39:42.162 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_backup_status]
2025-05-18 00:39:42.162 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:42.162 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_backup_progress]
2025-05-18 00:39:42.162 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:42.162 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:42.162 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [21]
2025-05-18 00:39:42.162 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [17]
2025-05-18 00:39:42.162 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [19]
2025-05-18 00:39:42.162 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, recovery_type, status, start_time, completion_time, backup_dest FROM oceanbase.gv$recovery_job WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (start_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY start_time DESC]
2025-05-18 00:39:42.162 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, backup_type, status, start_time, completion_time, backup_dest FROM oceanbase.gv$backup_job WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (start_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY start_time DESC]
2025-05-18 00:39:42.163 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, job_id, backup_type, status, start_time, completion_time, total_bytes, finish_bytes, finish_bytes/total_bytes*100 as progress_percent FROM oceanbase.gv$backup_progress WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND job_id = IFNULL(:job_id, job_id) ORDER BY start_time DESC]
2025-05-18 00:39:42.163 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_recovery_status]
2025-05-18 00:39:42.163 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_backup_progress]
2025-05-18 00:39:42.163 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_backup_status]
2025-05-18 00:39:42.163 [pool-3-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:42.163 [pool-3-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:42.163 [pool-3-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:42.163 [pool-3-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_backup_progress 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:42.163 [pool-3-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_backup_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:42.163 [pool-3-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_recovery_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:42.167 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [24]
2025-05-18 00:39:42.167 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, job_id, recovery_type, status, start_time, completion_time, total_bytes, finish_bytes, finish_bytes/total_bytes*100 as progress_percent FROM oceanbase.__all_recovery_progress WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND job_id = IFNULL(:job_id, job_id) ORDER BY start_time DESC]
2025-05-18 00:39:42.167 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_recovery_progress]
2025-05-18 00:39:42.167 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:39:42.167 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [23]
2025-05-18 00:39:42.167 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, job_id, recovery_type, status, start_time, completion_time, total_bytes, finish_bytes, finish_bytes/total_bytes*100 as progress_percent FROM oceanbase.gv$recovery_progress WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND job_id = IFNULL(:job_id, job_id) ORDER BY start_time DESC]
2025-05-18 00:39:42.167 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_recovery_progress]
2025-05-18 00:39:42.167 [pool-3-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:39:42.168 [pool-3-thread-4] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_recovery_progress 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:39:42.169 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - update async_task set callback_url=?, error_message=?, request_payload=?, results=?, scene_code=?, status=?, update_time=? where task_id=?
2025-05-18 00:39:42.169 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [null]
2025-05-18 00:39:42.169 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [2] as [VARCHAR] - [null]
2025-05-18 00:39:42.169 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [3] as [CLOB] - [{"datasourceType":"registered","datasourceConfig":null,"externalSourceId":null,"datasourceId":"ob-cluster-prod","tenant":null,"startTime":null,"endTime":null,"extraParams":{"tenantId":1001,"startTime":"2025-05-01T00:00:00Z","endTime":"2025-05-16T00:00:00Z"},"async":true,"executionTimeoutMs":null,"callbackUrl":null}]
2025-05-18 00:39:42.169 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [4] as [CLOB] - [null]
2025-05-18 00:39:42.169 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [5] as [VARCHAR] - [backup_recovery_monitor]
2025-05-18 00:39:42.169 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [6] as [VARCHAR] - [SUCCESS]
2025-05-18 00:39:42.169 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [7] as [TIMESTAMP] - [2025-05-18T00:39:42.168562400]
2025-05-18 00:39:42.169 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [8] as [VARCHAR] - [77044e32-8f18-49e7-9916-bf85708c1937]
2025-05-18 00:40:18.304 [http-nio-8080-exec-5] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: merge_monitor, async: false
2025-05-18 00:40:18.532 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:40:18.532 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [merge_monitor]
2025-05-18 00:40:18.618 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [4]
2025-05-18 00:40:18.618 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:18.618 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [监控 OceanBase 合并任务的状态和进度]
2025-05-18 00:40:18.618 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [merge_monitor]
2025-05-18 00:40:18.618 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [合并监控]
2025-05-18 00:40:18.618 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_major_freeze_status", "ob_merge_progress", "ob_merge_error"]]
2025-05-18 00:40:18.619 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:40:18.619 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:40:18.740 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:40:18.740 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:18.740 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:40:18.740 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:18.740 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:40:18.740 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:40:18.740 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:18.740 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:40:18.740 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:40:19.822 [pool-4-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:19.822 [pool-4-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:19.822 [pool-4-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:19.863 [pool-4-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_merge_progress]
2025-05-18 00:40:19.863 [pool-4-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_major_freeze_status]
2025-05-18 00:40:19.863 [pool-4-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_merge_error]
2025-05-18 00:40:19.911 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [13]
2025-05-18 00:40:19.911 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [15]
2025-05-18 00:40:19.911 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [14]
2025-05-18 00:40:19.912 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:19.912 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:19.912 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 主合并状态]
2025-05-18 00:40:19.912 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}]]
2025-05-18 00:40:19.912 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [merge_monitor]
2025-05-18 00:40:19.912 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_major_freeze_status]
2025-05-18 00:40:19.912 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:19.912 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:19.912 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:19.912 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:19.912 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:19.912 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 合并进度]
2025-05-18 00:40:19.912 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 合并错误]
2025-05-18 00:40:19.912 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}]]
2025-05-18 00:40:19.912 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": false}, {"name": "end_time", "type": "datetime", "required": false}]]
2025-05-18 00:40:19.912 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [merge_monitor]
2025-05-18 00:40:19.912 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [merge_monitor]
2025-05-18 00:40:19.912 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_merge_progress]
2025-05-18 00:40:19.912 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_merge_error]
2025-05-18 00:40:19.912 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:19.912 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:19.912 [pool-4-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:19.912 [pool-4-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:19.912 [pool-4-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:19.912 [pool-4-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_major_freeze_status]
2025-05-18 00:40:19.912 [pool-4-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_merge_progress]
2025-05-18 00:40:19.912 [pool-4-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_merge_error]
2025-05-18 00:40:19.951 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [26]
2025-05-18 00:40:19.951 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [30]
2025-05-18 00:40:19.951 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [28]
2025-05-18 00:40:19.952 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, frozen_time, status FROM oceanbase.__all_major_freeze_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) ORDER BY frozen_time DESC LIMIT 10]
2025-05-18 00:40:19.952 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, error_type, error_msg, error_time FROM oceanbase.__all_merge_error WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (error_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY error_time DESC]
2025-05-18 00:40:19.952 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, frozen_time, global_broadcast_scn, is_merging, merge_start_time, merge_finish_time, is_error, error_type FROM oceanbase.__all_merge_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) ORDER BY frozen_time DESC LIMIT 10]
2025-05-18 00:40:19.952 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_major_freeze_status]
2025-05-18 00:40:19.952 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_merge_error]
2025-05-18 00:40:19.952 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:19.952 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:19.952 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_merge_progress]
2025-05-18 00:40:19.952 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [29]
2025-05-18 00:40:19.952 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:19.952 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [25]
2025-05-18 00:40:19.952 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, error_type, error_msg, error_time FROM oceanbase.gv$merge_error WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (error_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY error_time DESC]
2025-05-18 00:40:19.952 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [27]
2025-05-18 00:40:19.952 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_merge_error]
2025-05-18 00:40:19.952 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, frozen_time, global_broadcast_scn, is_merging, merge_start_time, merge_finish_time, is_error, error_type FROM oceanbase.gv$merge_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) ORDER BY frozen_time DESC LIMIT 10]
2025-05-18 00:40:19.952 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, frozen_time, status FROM oceanbase.gv$major_freeze_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) ORDER BY frozen_time DESC LIMIT 10]
2025-05-18 00:40:19.952 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_merge_progress]
2025-05-18 00:40:19.952 [pool-4-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:19.952 [pool-4-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:19.952 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_major_freeze_status]
2025-05-18 00:40:19.952 [pool-4-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:19.952 [pool-4-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_merge_progress 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:19.952 [pool-4-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_major_freeze_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:19.952 [pool-4-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_merge_error 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:28.703 [http-nio-8080-exec-10] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: tenant_resource_usage, async: false
2025-05-18 00:40:28.822 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:40:28.822 [http-nio-8080-exec-10] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [tenant_resource_usage]
2025-05-18 00:40:28.892 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [5]
2025-05-18 00:40:28.892 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:28.892 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [监控 OceanBase 租户的资源使用情况，包括 CPU、内存、磁盘等]
2025-05-18 00:40:28.892 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [tenant_resource_usage]
2025-05-18 00:40:28.892 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [租户资源使用]
2025-05-18 00:40:28.892 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_tenant_cpu_usage", "ob_tenant_memory_usage", "ob_tenant_disk_usage"]]
2025-05-18 00:40:28.893 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:40:28.893 [http-nio-8080-exec-10] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:40:29.004 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:40:29.004 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:29.004 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:40:29.004 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:29.004 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:40:29.004 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:40:29.004 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:29.004 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:40:29.004 [http-nio-8080-exec-10] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:40:29.552 [pool-5-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:29.552 [pool-5-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:29.552 [pool-5-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:29.620 [pool-5-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_disk_usage]
2025-05-18 00:40:29.620 [pool-5-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_memory_usage]
2025-05-18 00:40:29.620 [pool-5-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_cpu_usage]
2025-05-18 00:40:29.702 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [16]
2025-05-18 00:40:29.702 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [18]
2025-05-18 00:40:29.702 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [17]
2025-05-18 00:40:29.702 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:29.702 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:29.702 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:29.702 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:29.702 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:29.702 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:29.702 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 租户内存使用情况]
2025-05-18 00:40:29.702 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 租户 CPU 使用情况]
2025-05-18 00:40:29.702 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 租户磁盘使用情况]
2025-05-18 00:40:29.702 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "tenant_name", "type": "string", "required": false}]]
2025-05-18 00:40:29.702 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "tenant_name", "type": "string", "required": false}]]
2025-05-18 00:40:29.702 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "tenant_name", "type": "string", "required": false}]]
2025-05-18 00:40:29.702 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [tenant_resource_usage]
2025-05-18 00:40:29.702 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [tenant_resource_usage]
2025-05-18 00:40:29.702 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [tenant_resource_usage]
2025-05-18 00:40:29.702 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_tenant_disk_usage]
2025-05-18 00:40:29.702 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_tenant_cpu_usage]
2025-05-18 00:40:29.702 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:29.702 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_tenant_memory_usage]
2025-05-18 00:40:29.702 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:29.702 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:29.702 [pool-5-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:29.702 [pool-5-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:29.702 [pool-5-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:29.702 [pool-5-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_disk_usage]
2025-05-18 00:40:29.702 [pool-5-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_memory_usage]
2025-05-18 00:40:29.703 [pool-5-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_cpu_usage]
2025-05-18 00:40:29.742 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [32]
2025-05-18 00:40:29.742 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [36]
2025-05-18 00:40:29.742 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, cpu_quota, cpu_used, cpu_used/cpu_quota*100 as cpu_usage_percent FROM oceanbase.__all_tenant_cpu_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY cpu_usage_percent DESC]
2025-05-18 00:40:29.742 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, disk_quota, disk_used, disk_used/disk_quota*100 as disk_usage_percent FROM oceanbase.__all_tenant_disk_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY disk_usage_percent DESC]
2025-05-18 00:40:29.742 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_cpu_usage]
2025-05-18 00:40:29.742 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:29.742 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_disk_usage]
2025-05-18 00:40:29.742 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:29.742 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [31]
2025-05-18 00:40:29.742 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [35]
2025-05-18 00:40:29.742 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, cpu_quota, cpu_used, cpu_used/cpu_quota*100 as cpu_usage_percent FROM oceanbase.gv$tenant_cpu_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY cpu_usage_percent DESC]
2025-05-18 00:40:29.742 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_cpu_usage]
2025-05-18 00:40:29.742 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, disk_quota, disk_used, disk_used/disk_quota*100 as disk_usage_percent FROM oceanbase.gv$tenant_disk_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY disk_usage_percent DESC]
2025-05-18 00:40:29.742 [pool-5-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:29.742 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_disk_usage]
2025-05-18 00:40:29.742 [pool-5-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:29.743 [pool-5-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_tenant_disk_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:29.743 [pool-5-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_tenant_cpu_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:29.744 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [34]
2025-05-18 00:40:29.744 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, memory_quota, memory_used, memory_used/memory_quota*100 as memory_usage_percent FROM oceanbase.__all_tenant_memory_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY memory_usage_percent DESC]
2025-05-18 00:40:29.744 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_memory_usage]
2025-05-18 00:40:29.744 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:29.744 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [33]
2025-05-18 00:40:29.744 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, memory_quota, memory_used, memory_used/memory_quota*100 as memory_usage_percent FROM oceanbase.gv$tenant_memory_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY memory_usage_percent DESC]
2025-05-18 00:40:29.744 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_memory_usage]
2025-05-18 00:40:29.744 [pool-5-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:29.745 [pool-5-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_tenant_memory_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:41.503 [http-nio-8080-exec-7] INFO  c.o.q.a.c.DatasourceController - Received request to test datasource connection: direct
2025-05-18 00:40:42.431 [http-nio-8080-exec-7] INFO  c.o.q.a.s.impl.DatasourceServiceImpl - 数据源连接测试成功: jdbc:mysql://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx
2025-05-18 00:40:42.457 [http-nio-8080-exec-8] INFO  c.o.q.a.c.DatasourceController - Received request to test datasource connection: registered
2025-05-18 00:40:42.458 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:40:42.533 [http-nio-8080-exec-8] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:40:42.570 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:40:42.570 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:42.570 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:40:42.570 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:42.570 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:40:42.570 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:40:42.570 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:42.570 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:40:42.570 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:40:43.177 [http-nio-8080-exec-8] INFO  c.o.q.a.s.impl.DatasourceServiceImpl - 数据源连接测试成功: jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx
2025-05-18 00:40:43.228 [http-nio-8080-exec-6] INFO  c.o.q.api.controller.SceneController - Received request to register query scene: custom_test_scene
2025-05-18 00:40:43.295 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select queryscene0_.id as col_0_0_ from query_scene queryscene0_ where queryscene0_.scene_code=? limit ?
2025-05-18 00:40:43.295 [http-nio-8080-exec-6] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [custom_test_scene]
2025-05-18 00:40:43.344 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - insert into query_scene (create_time, description, scene_code, scene_name, template_ids) values (?, ?, ?, ?, ?)
2025-05-18 00:40:43.345 [http-nio-8080-exec-6] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [TIMESTAMP] - [2025-05-18T00:40:43.344343400]
2025-05-18 00:40:43.345 [http-nio-8080-exec-6] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [2] as [CLOB] - [用于 Postman 测试的自定义场景]
2025-05-18 00:40:43.345 [http-nio-8080-exec-6] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [3] as [VARCHAR] - [custom_test_scene]
2025-05-18 00:40:43.345 [http-nio-8080-exec-6] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [4] as [VARCHAR] - [自定义测试场景]
2025-05-18 00:40:43.345 [http-nio-8080-exec-6] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [5] as [CLOB] - [["ob_cluster_info","ob_tenant_status"]]
2025-05-18 00:40:43.382 [http-nio-8080-exec-6] INFO  c.o.q.a.s.impl.SceneServiceImpl - 查询场景已注册: custom_test_scene
2025-05-18 00:40:43.503 [http-nio-8080-exec-1] INFO  c.o.q.a.c.TemplateController - Received request to register SQL template: custom_test_template
2025-05-18 00:40:43.547 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as col_0_0_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=? limit ?
2025-05-18 00:40:43.547 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [custom_test_template]
2025-05-18 00:40:43.584 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into sql_template (create_time, db_type, description, parameters, scene_code, template_id, update_time) values (?, ?, ?, ?, ?, ?, ?)
2025-05-18 00:40:43.585 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [TIMESTAMP] - [2025-05-18T00:40:43.584484]
2025-05-18 00:40:43.585 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [2] as [VARCHAR] - [OCEANBASE]
2025-05-18 00:40:43.585 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [3] as [CLOB] - [用于 Postman 测试的自定义模板]
2025-05-18 00:40:43.585 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [4] as [CLOB] - [[{"name":"tenantName","type":"string","required":false,"expression":null}]]
2025-05-18 00:40:43.585 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [5] as [VARCHAR] - [custom_test_scene]
2025-05-18 00:40:43.585 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [6] as [VARCHAR] - [custom_test_template]
2025-05-18 00:40:43.585 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [7] as [TIMESTAMP] - [2025-05-18T00:40:43.584484]
2025-05-18 00:40:43.631 [http-nio-8080-exec-1] INFO  c.o.q.a.s.impl.TemplateServiceImpl - SQL模板已注册: custom_test_template
2025-05-18 00:40:43.633 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into sql_template_version (sql_text, template_id, version_condition) values (?, ?, ?)
2025-05-18 00:40:43.634 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [CLOB] - [SELECT * FROM oceanbase.gv$tenant WHERE tenantName = IFNULL(:tenantName, tenantName)]
2025-05-18 00:40:43.634 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [2] as [VARCHAR] - [custom_test_template]
2025-05-18 00:40:43.634 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [3] as [VARCHAR] - [>=4.0.0]
2025-05-18 00:40:43.705 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into sql_template_version (sql_text, template_id, version_condition) values (?, ?, ?)
2025-05-18 00:40:43.705 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [CLOB] - [SELECT * FROM oceanbase.__all_tenant WHERE tenantName = IFNULL(:tenantName, tenantName)]
2025-05-18 00:40:43.705 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [2] as [VARCHAR] - [custom_test_template]
2025-05-18 00:40:43.705 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [3] as [VARCHAR] - [<4.0.0]
2025-05-18 00:40:43.769 [http-nio-8080-exec-1] INFO  c.o.q.a.s.impl.TemplateServiceImpl - SQL模板版本已注册 for templateId: custom_test_template
2025-05-18 00:40:43.771 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:43.772 [http-nio-8080-exec-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [custom_test_template]
2025-05-18 00:40:43.807 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [38]
2025-05-18 00:40:43.807 [http-nio-8080-exec-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [37]
2025-05-18 00:40:43.906 [http-nio-8080-exec-3] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: cluster_status_monitor, async: false
2025-05-18 00:40:43.954 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:40:43.954 [http-nio-8080-exec-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [cluster_status_monitor]
2025-05-18 00:40:43.988 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [1]
2025-05-18 00:40:43.988 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:43.988 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [监控 OceanBase 集群的整体状态，包括租户、服务器、分区等信息]
2025-05-18 00:40:43.988 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:40:43.988 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [集群状态监控]
2025-05-18 00:40:43.988 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_cluster_info", "ob_tenant_status", "ob_server_status", "ob_partition_status"]]
2025-05-18 00:40:43.989 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:40:43.989 [http-nio-8080-exec-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:40:44.026 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:40:44.026 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.026 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:40:44.026 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:44.026 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:40:44.026 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:40:44.026 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.026 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:40:44.026 [http-nio-8080-exec-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:40:44.780 [pool-6-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:44.780 [pool-6-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:44.780 [pool-6-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:44.780 [pool-6-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:44.868 [pool-6-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_cluster_info]
2025-05-18 00:40:44.868 [pool-6-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_partition_status]
2025-05-18 00:40:44.868 [pool-6-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_server_status]
2025-05-18 00:40:44.868 [pool-6-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_status]
2025-05-18 00:40:44.975 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [4]
2025-05-18 00:40:44.975 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [2]
2025-05-18 00:40:44.975 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.975 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.975 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:44.976 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 租户状态]
2025-05-18 00:40:44.975 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [1]
2025-05-18 00:40:44.975 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:44.976 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "tenant_name", "type": "string", "required": false}]]
2025-05-18 00:40:44.976 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.975 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [3]
2025-05-18 00:40:44.976 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:44.976 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:40:44.976 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 分区状态]
2025-05-18 00:40:44.976 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 集群基本信息]
2025-05-18 00:40:44.976 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.976 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "cluster_id", "type": "string", "required": false}]]
2025-05-18 00:40:44.976 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "table_id", "type": "integer", "required": false}]]
2025-05-18 00:40:44.976 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:40:44.976 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_tenant_status]
2025-05-18 00:40:44.976 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:44.976 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.976 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_cluster_info]
2025-05-18 00:40:44.976 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 服务器状态]
2025-05-18 00:40:44.976 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:40:44.976 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "zone", "type": "string", "required": false}, {"name": "svr_ip", "type": "string", "required": false}]]
2025-05-18 00:40:44.976 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.976 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_partition_status]
2025-05-18 00:40:44.976 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.976 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [cluster_status_monitor]
2025-05-18 00:40:44.976 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_server_status]
2025-05-18 00:40:44.976 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:44.976 [pool-6-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:44.976 [pool-6-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:44.976 [pool-6-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:44.976 [pool-6-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:44.976 [pool-6-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_partition_status]
2025-05-18 00:40:44.976 [pool-6-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_status]
2025-05-18 00:40:44.976 [pool-6-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_cluster_info]
2025-05-18 00:40:44.976 [pool-6-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_server_status]
2025-05-18 00:40:45.072 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [6]
2025-05-18 00:40:45.072 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [4]
2025-05-18 00:40:45.072 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [2]
2025-05-18 00:40:45.072 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [8]
2025-05-18 00:40:45.073 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, svr_port, zone, status, start_service_time, stop_time, build_version FROM oceanbase.__all_server WHERE zone = IFNULL(:zone, zone) AND svr_ip = IFNULL(:svr_ip, svr_ip)]
2025-05-18 00:40:45.073 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT * FROM oceanbase.__all_cluster WHERE cluster_id = IFNULL(:cluster_id, cluster_id)]
2025-05-18 00:40:45.073 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_server_status]
2025-05-18 00:40:45.073 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, table_id, partition_id, svr_ip, svr_port, role, replica_type, status FROM oceanbase.__all_partition WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND table_id = IFNULL(:table_id, table_id)]
2025-05-18 00:40:45.073 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT t.tenant_id, t.tenant_name, t.status, t.create_time, t.zone_list, ts.cpu_quota, ts.memory_quota, ts.disk_quota FROM oceanbase.__all_tenant t JOIN oceanbase.__all_tenant_stat ts ON t.tenant_id = ts.tenant_id WHERE t.tenant_id = IFNULL(:tenant_id, t.tenant_id) AND t.tenant_name = IFNULL(:tenant_name, t.tenant_name)]
2025-05-18 00:40:45.073 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_cluster_info]
2025-05-18 00:40:45.073 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_status]
2025-05-18 00:40:45.073 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:45.073 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_partition_status]
2025-05-18 00:40:45.073 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:45.073 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:45.073 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:45.073 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [7]
2025-05-18 00:40:45.073 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [5]
2025-05-18 00:40:45.073 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, table_id, partition_id, svr_ip, svr_port, role, replica_type, status FROM oceanbase.gv$partition_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND table_id = IFNULL(:table_id, table_id)]
2025-05-18 00:40:45.073 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [1]
2025-05-18 00:40:45.073 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [3]
2025-05-18 00:40:45.073 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_partition_status]
2025-05-18 00:40:45.073 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, svr_port, zone, status, start_service_time, stop_time, build_version FROM oceanbase.gv$observer WHERE zone = IFNULL(:zone, zone) AND svr_ip = IFNULL(:svr_ip, svr_ip)]
2025-05-18 00:40:45.073 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT * FROM oceanbase.gv$ob_cluster WHERE cluster_id = IFNULL(:cluster_id, cluster_id)]
2025-05-18 00:40:45.073 [pool-6-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:45.073 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_cluster_info]
2025-05-18 00:40:45.073 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT t.tenant_id, t.tenant_name, t.status, t.create_time, t.zone_list, ts.cpu_quota, ts.memory_quota, ts.disk_quota FROM oceanbase.gv$tenant t JOIN oceanbase.gv$tenant_stat ts ON t.tenant_id = ts.tenant_id WHERE t.tenant_id = IFNULL(:tenant_id, t.tenant_id) AND t.tenant_name = IFNULL(:tenant_name, t.tenant_name)]
2025-05-18 00:40:45.073 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_server_status]
2025-05-18 00:40:45.073 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_status]
2025-05-18 00:40:45.073 [pool-6-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:45.073 [pool-6-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:45.073 [pool-6-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:45.073 [pool-6-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_cluster_info 失败: No value supplied for the SQL parameter 'cluster_id': No value registered for key 'cluster_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'cluster_id': No value registered for key 'cluster_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:45.073 [pool-6-thread-4] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_partition_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:45.073 [pool-6-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_server_status 失败: No value supplied for the SQL parameter 'zone': No value registered for key 'zone'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'zone': No value registered for key 'zone'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:45.073 [pool-6-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_tenant_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:45.289 [http-nio-8080-exec-4] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: performance_diagnosis, async: false
2025-05-18 00:40:45.394 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:40:45.395 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [performance_diagnosis]
2025-05-18 00:40:45.515 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [2]
2025-05-18 00:40:45.515 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:45.515 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [诊断 OceanBase 集群性能问题，包括慢 SQL、内存使用、CPU 使用等]
2025-05-18 00:40:45.516 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:40:45.516 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [性能诊断]
2025-05-18 00:40:45.516 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_slow_sql", "ob_memory_usage", "ob_cpu_usage", "ob_io_stats"]]
2025-05-18 00:40:45.516 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:40:45.516 [http-nio-8080-exec-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:40:45.612 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:40:45.612 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:45.612 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:40:45.612 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:45.612 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:40:45.612 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:40:45.612 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:45.612 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:40:45.613 [http-nio-8080-exec-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:40:46.325 [pool-7-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:46.325 [pool-7-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:46.325 [pool-7-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:46.325 [pool-7-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:46.397 [pool-7-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_io_stats]
2025-05-18 00:40:46.397 [pool-7-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_memory_usage]
2025-05-18 00:40:46.397 [pool-7-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_slow_sql]
2025-05-18 00:40:46.397 [pool-7-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_cpu_usage]
2025-05-18 00:40:46.433 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [6]
2025-05-18 00:40:46.433 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.433 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:46.433 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 内存使用情况]
2025-05-18 00:40:46.433 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "svr_ip", "type": "string", "required": false}]]
2025-05-18 00:40:46.433 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:40:46.433 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_memory_usage]
2025-05-18 00:40:46.433 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.433 [pool-7-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:46.434 [pool-7-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_memory_usage]
2025-05-18 00:40:46.436 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [8]
2025-05-18 00:40:46.436 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.436 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:46.436 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase IO 统计信息]
2025-05-18 00:40:46.436 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "svr_ip", "type": "string", "required": false}]]
2025-05-18 00:40:46.436 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:40:46.436 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_io_stats]
2025-05-18 00:40:46.436 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.436 [pool-7-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:46.436 [pool-7-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_io_stats]
2025-05-18 00:40:46.437 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [5]
2025-05-18 00:40:46.437 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [7]
2025-05-18 00:40:46.437 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.437 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.437 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:46.437 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:46.437 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 慢 SQL]
2025-05-18 00:40:46.437 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase CPU 使用情况]
2025-05-18 00:40:46.437 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": true}, {"name": "end_time", "type": "datetime", "required": true}, {"name": "threshold_ms", "type": "integer", "required": false, "default": 1000}]]
2025-05-18 00:40:46.438 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:40:46.438 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "svr_ip", "type": "string", "required": false}]]
2025-05-18 00:40:46.438 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_slow_sql]
2025-05-18 00:40:46.438 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [performance_diagnosis]
2025-05-18 00:40:46.438 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.438 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_cpu_usage]
2025-05-18 00:40:46.438 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.438 [pool-7-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:46.438 [pool-7-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:46.438 [pool-7-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_slow_sql]
2025-05-18 00:40:46.438 [pool-7-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_cpu_usage]
2025-05-18 00:40:46.496 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [12]
2025-05-18 00:40:46.497 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [14]
2025-05-18 00:40:46.497 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [16]
2025-05-18 00:40:46.496 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [10]
2025-05-18 00:40:46.497 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, file_type, read_count, read_bytes, write_count, write_bytes FROM oceanbase.__all_io_stat WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip)]
2025-05-18 00:40:46.497 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, sql_id, plan_id, execution_id, user_name, db_name, sql_text, elapsed_time, execute_time, affected_rows, return_rows FROM oceanbase.__all_sql_audit WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND execute_time BETWEEN :start_time AND :end_time AND elapsed_time > IFNULL(:threshold_ms, 1000) ORDER BY elapsed_time DESC LIMIT 100]
2025-05-18 00:40:46.497 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, cpu_quota, cpu_used, cpu_used/cpu_quota*100 as cpu_usage_percent FROM oceanbase.__all_tenant_cpu_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip) ORDER BY cpu_usage_percent DESC]
2025-05-18 00:40:46.497 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_slow_sql]
2025-05-18 00:40:46.497 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, context, sum(used) as used, sum(total) as total FROM oceanbase.__all_memory_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip) GROUP BY svr_ip, tenant_id, tenant_name, context ORDER BY used DESC]
2025-05-18 00:40:46.497 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_cpu_usage]
2025-05-18 00:40:46.497 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_io_stats]
2025-05-18 00:40:46.497 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_memory_usage]
2025-05-18 00:40:46.497 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:46.497 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:46.497 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:46.497 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:46.497 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [15]
2025-05-18 00:40:46.497 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [9]
2025-05-18 00:40:46.497 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [13]
2025-05-18 00:40:46.497 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [11]
2025-05-18 00:40:46.497 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, file_type, read_count, read_bytes, write_count, write_bytes FROM oceanbase.gv$io_stat WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip)]
2025-05-18 00:40:46.497 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, sql_id, plan_id, execution_id, user_name, db_name, sql_text, elapsed_time, execute_time, affected_rows, return_rows FROM oceanbase.gv$ob_sql_audit WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND execute_time BETWEEN :start_time AND :end_time AND elapsed_time > IFNULL(:threshold_ms, 1000) ORDER BY elapsed_time DESC LIMIT 100]
2025-05-18 00:40:46.497 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_io_stats]
2025-05-18 00:40:46.497 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_slow_sql]
2025-05-18 00:40:46.497 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, context, sum(used) as used, sum(total) as total FROM oceanbase.gv$memory_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip) GROUP BY svr_ip, tenant_id, tenant_name, context ORDER BY used DESC]
2025-05-18 00:40:46.497 [pool-7-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:46.497 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT svr_ip, tenant_id, tenant_name, cpu_quota, cpu_used, cpu_used/cpu_quota*100 as cpu_usage_percent FROM oceanbase.gv$tenant_cpu_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND svr_ip = IFNULL(:svr_ip, svr_ip) ORDER BY cpu_usage_percent DESC]
2025-05-18 00:40:46.497 [pool-7-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:46.497 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_cpu_usage]
2025-05-18 00:40:46.497 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_memory_usage]
2025-05-18 00:40:46.497 [pool-7-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:46.497 [pool-7-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:46.498 [pool-7-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 解析模板参数定义失败 for template ob_slow_sql: Unrecognized field "default" (class com.oceanbase.query.api.dto.TemplateParameterDto), not marked as ignorable (4 known properties: "expression", "type", "name", "required"])
 at [Source: (String)"[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": true}, {"name": "end_time", "type": "datetime", "required": true}, {"name": "threshold_ms", "type": "integer", "required": false, "default": 1000}]"; line: 1, column: 263] (through reference chain: java.util.ArrayList[3]->com.oceanbase.query.api.dto.TemplateParameterDto["default"])
2025-05-18 00:40:46.498 [pool-7-thread-4] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_io_stats 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:46.498 [pool-7-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_cpu_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:46.498 [pool-7-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_memory_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:46.608 [http-nio-8080-exec-5] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: backup_recovery_monitor, async: true
2025-05-18 00:40:46.642 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:40:46.642 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [backup_recovery_monitor]
2025-05-18 00:40:46.699 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [3]
2025-05-18 00:40:46.699 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.699 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [监控 OceanBase 备份恢复任务的状态和进度]
2025-05-18 00:40:46.699 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:40:46.699 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [备份恢复监控]
2025-05-18 00:40:46.699 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_backup_status", "ob_backup_progress", "ob_recovery_status", "ob_recovery_progress"]]
2025-05-18 00:40:46.699 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select asynctask0_.task_id as task_id1_0_0_, asynctask0_.callback_url as callback2_0_0_, asynctask0_.create_time as create_t3_0_0_, asynctask0_.error_message as error_me4_0_0_, asynctask0_.request_payload as request_5_0_0_, asynctask0_.results as results6_0_0_, asynctask0_.scene_code as scene_co7_0_0_, asynctask0_.status as status8_0_0_, asynctask0_.update_time as update_t9_0_0_ from async_task asynctask0_ where asynctask0_.task_id=?
2025-05-18 00:40:46.699 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [f5c632e2-21e9-4be6-99d2-cf262babe15d]
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - insert into async_task (callback_url, create_time, error_message, request_payload, results, scene_code, status, update_time, task_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [null]
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [2] as [TIMESTAMP] - [2025-05-18T00:40:46.740564800]
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [3] as [VARCHAR] - [null]
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [4] as [CLOB] - [{"datasourceType":"registered","datasourceConfig":null,"externalSourceId":null,"datasourceId":"ob-cluster-prod","tenant":null,"startTime":null,"endTime":null,"extraParams":{"tenantId":1001,"startTime":"2025-05-01T00:00:00Z","endTime":"2025-05-16T00:00:00Z"},"async":true,"executionTimeoutMs":null,"callbackUrl":null}]
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [5] as [CLOB] - [null]
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [6] as [VARCHAR] - [backup_recovery_monitor]
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [7] as [VARCHAR] - [PENDING]
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [8] as [TIMESTAMP] - [2025-05-18T00:40:46.699938400]
2025-05-18 00:40:46.740 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [9] as [VARCHAR] - [f5c632e2-21e9-4be6-99d2-cf262babe15d]
2025-05-18 00:40:46.814 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select asynctask0_.task_id as task_id1_0_, asynctask0_.callback_url as callback2_0_, asynctask0_.create_time as create_t3_0_, asynctask0_.error_message as error_me4_0_, asynctask0_.request_payload as request_5_0_, asynctask0_.results as results6_0_, asynctask0_.scene_code as scene_co7_0_, asynctask0_.status as status8_0_, asynctask0_.update_time as update_t9_0_ from async_task asynctask0_ where asynctask0_.task_id=?
2025-05-18 00:40:46.815 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [f5c632e2-21e9-4be6-99d2-cf262babe15d]
2025-05-18 00:40:46.922 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([task_id1_0_] : [VARCHAR]) - [f5c632e2-21e9-4be6-99d2-cf262babe15d]
2025-05-18 00:40:46.923 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:40:46.923 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:40:46.971 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:40:46.971 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.971 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:40:46.971 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:46.971 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:40:46.971 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:40:46.971 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:46.971 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:40:46.971 [http-nio-8080-exec-5] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:40:47.464 [pool-8-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:47.464 [pool-8-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:47.465 [pool-8-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:47.465 [pool-8-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:47.559 [pool-8-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_backup_progress]
2025-05-18 00:40:47.559 [pool-8-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_backup_status]
2025-05-18 00:40:47.559 [pool-8-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_recovery_status]
2025-05-18 00:40:47.559 [pool-8-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_recovery_progress]
2025-05-18 00:40:47.630 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [11]
2025-05-18 00:40:47.630 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [10]
2025-05-18 00:40:47.630 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [12]
2025-05-18 00:40:47.630 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [9]
2025-05-18 00:40:47.630 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.630 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.630 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.630 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.630 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:47.630 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:47.630 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:47.630 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:47.630 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 恢复任务状态]
2025-05-18 00:40:47.630 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 恢复任务进度]
2025-05-18 00:40:47.630 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 备份任务进度]
2025-05-18 00:40:47.630 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 备份任务状态]
2025-05-18 00:40:47.630 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "job_id", "type": "string", "required": false}]]
2025-05-18 00:40:47.630 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": false}, {"name": "end_time", "type": "datetime", "required": false}]]
2025-05-18 00:40:47.630 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:40:47.630 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": false}, {"name": "end_time", "type": "datetime", "required": false}]]
2025-05-18 00:40:47.630 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "job_id", "type": "string", "required": false}]]
2025-05-18 00:40:47.630 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:40:47.630 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:40:47.630 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [backup_recovery_monitor]
2025-05-18 00:40:47.630 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_recovery_progress]
2025-05-18 00:40:47.630 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_recovery_status]
2025-05-18 00:40:47.630 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_backup_status]
2025-05-18 00:40:47.630 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.630 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_backup_progress]
2025-05-18 00:40:47.630 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.631 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.631 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.631 [pool-8-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:47.631 [pool-8-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:47.631 [pool-8-thread-4] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:47.631 [pool-8-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:47.631 [pool-8-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_backup_status]
2025-05-18 00:40:47.631 [pool-8-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_recovery_status]
2025-05-18 00:40:47.631 [pool-8-thread-4] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_recovery_progress]
2025-05-18 00:40:47.631 [pool-8-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_backup_progress]
2025-05-18 00:40:47.685 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [20]
2025-05-18 00:40:47.685 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [24]
2025-05-18 00:40:47.685 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [22]
2025-05-18 00:40:47.685 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [18]
2025-05-18 00:40:47.685 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, job_id, backup_type, status, start_time, completion_time, total_bytes, finish_bytes, finish_bytes/total_bytes*100 as progress_percent FROM oceanbase.__all_backup_progress WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND job_id = IFNULL(:job_id, job_id) ORDER BY start_time DESC]
2025-05-18 00:40:47.685 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, recovery_type, status, start_time, completion_time, backup_dest FROM oceanbase.__all_recovery_job WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (start_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY start_time DESC]
2025-05-18 00:40:47.685 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, backup_type, status, start_time, completion_time, backup_dest FROM oceanbase.__all_backup_job WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (start_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY start_time DESC]
2025-05-18 00:40:47.685 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, job_id, recovery_type, status, start_time, completion_time, total_bytes, finish_bytes, finish_bytes/total_bytes*100 as progress_percent FROM oceanbase.__all_recovery_progress WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND job_id = IFNULL(:job_id, job_id) ORDER BY start_time DESC]
2025-05-18 00:40:47.686 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_recovery_progress]
2025-05-18 00:40:47.686 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_recovery_status]
2025-05-18 00:40:47.686 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_backup_progress]
2025-05-18 00:40:47.686 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:47.686 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_backup_status]
2025-05-18 00:40:47.686 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:47.686 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:47.686 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:47.686 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [23]
2025-05-18 00:40:47.686 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [17]
2025-05-18 00:40:47.686 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [21]
2025-05-18 00:40:47.686 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [19]
2025-05-18 00:40:47.686 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, job_id, recovery_type, status, start_time, completion_time, total_bytes, finish_bytes, finish_bytes/total_bytes*100 as progress_percent FROM oceanbase.gv$recovery_progress WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND job_id = IFNULL(:job_id, job_id) ORDER BY start_time DESC]
2025-05-18 00:40:47.686 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_recovery_progress]
2025-05-18 00:40:47.686 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, backup_type, status, start_time, completion_time, backup_dest FROM oceanbase.gv$backup_job WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (start_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY start_time DESC]
2025-05-18 00:40:47.686 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, recovery_type, status, start_time, completion_time, backup_dest FROM oceanbase.gv$recovery_job WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (start_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY start_time DESC]
2025-05-18 00:40:47.686 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, job_id, backup_type, status, start_time, completion_time, total_bytes, finish_bytes, finish_bytes/total_bytes*100 as progress_percent FROM oceanbase.gv$backup_progress WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND job_id = IFNULL(:job_id, job_id) ORDER BY start_time DESC]
2025-05-18 00:40:47.686 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_recovery_status]
2025-05-18 00:40:47.686 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_backup_progress]
2025-05-18 00:40:47.686 [pool-8-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:47.686 [pool-8-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:47.686 [pool-8-thread-4] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:47.686 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_backup_status]
2025-05-18 00:40:47.686 [pool-8-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:47.686 [pool-8-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_recovery_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:47.686 [pool-8-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_backup_progress 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:47.686 [pool-8-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_backup_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:47.686 [pool-8-thread-4] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_recovery_progress 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:47.686 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update async_task set callback_url=?, error_message=?, request_payload=?, results=?, scene_code=?, status=?, update_time=? where task_id=?
2025-05-18 00:40:47.686 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [null]
2025-05-18 00:40:47.686 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [2] as [VARCHAR] - [null]
2025-05-18 00:40:47.686 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [3] as [CLOB] - [{"datasourceType":"registered","datasourceConfig":null,"externalSourceId":null,"datasourceId":"ob-cluster-prod","tenant":null,"startTime":null,"endTime":null,"extraParams":{"tenantId":1001,"startTime":"2025-05-01T00:00:00Z","endTime":"2025-05-16T00:00:00Z"},"async":true,"executionTimeoutMs":null,"callbackUrl":null}]
2025-05-18 00:40:47.686 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [4] as [CLOB] - [null]
2025-05-18 00:40:47.686 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [5] as [VARCHAR] - [backup_recovery_monitor]
2025-05-18 00:40:47.686 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [6] as [VARCHAR] - [SUCCESS]
2025-05-18 00:40:47.686 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [7] as [TIMESTAMP] - [2025-05-18T00:40:47.686030700]
2025-05-18 00:40:47.686 [http-nio-8080-exec-5] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [8] as [VARCHAR] - [f5c632e2-21e9-4be6-99d2-cf262babe15d]
2025-05-18 00:40:47.816 [http-nio-8080-exec-10] INFO  c.o.q.api.controller.QueryController - Received request to get result for async task: {{taskId}}
2025-05-18 00:40:47.816 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select asynctask0_.task_id as task_id1_0_, asynctask0_.callback_url as callback2_0_, asynctask0_.create_time as create_t3_0_, asynctask0_.error_message as error_me4_0_, asynctask0_.request_payload as request_5_0_, asynctask0_.results as results6_0_, asynctask0_.scene_code as scene_co7_0_, asynctask0_.status as status8_0_, asynctask0_.update_time as update_t9_0_ from async_task asynctask0_ where asynctask0_.task_id=?
2025-05-18 00:40:47.816 [http-nio-8080-exec-10] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [{{taskId}}]
2025-05-18 00:40:47.867 [http-nio-8080-exec-8] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: merge_monitor, async: false
2025-05-18 00:40:47.920 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:40:47.920 [http-nio-8080-exec-8] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [merge_monitor]
2025-05-18 00:40:47.955 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [4]
2025-05-18 00:40:47.955 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.955 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [监控 OceanBase 合并任务的状态和进度]
2025-05-18 00:40:47.955 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [merge_monitor]
2025-05-18 00:40:47.955 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [合并监控]
2025-05-18 00:40:47.955 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_major_freeze_status", "ob_merge_progress", "ob_merge_error"]]
2025-05-18 00:40:47.955 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:40:47.955 [http-nio-8080-exec-8] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:40:47.991 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:40:47.991 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.991 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:40:47.991 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:47.991 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:40:47.991 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:40:47.991 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:47.991 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:40:47.991 [http-nio-8080-exec-8] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:40:48.547 [pool-9-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:48.547 [pool-9-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:48.547 [pool-9-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:48.643 [pool-9-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_merge_error]
2025-05-18 00:40:48.643 [pool-9-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_major_freeze_status]
2025-05-18 00:40:48.643 [pool-9-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_merge_progress]
2025-05-18 00:40:48.743 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [13]
2025-05-18 00:40:48.743 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [14]
2025-05-18 00:40:48.743 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [15]
2025-05-18 00:40:48.743 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:48.743 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:48.743 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:48.743 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:48.743 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:48.743 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:48.743 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 合并错误]
2025-05-18 00:40:48.743 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 合并进度]
2025-05-18 00:40:48.743 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 主合并状态]
2025-05-18 00:40:48.743 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}]]
2025-05-18 00:40:48.743 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}]]
2025-05-18 00:40:48.743 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [merge_monitor]
2025-05-18 00:40:48.743 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "start_time", "type": "datetime", "required": false}, {"name": "end_time", "type": "datetime", "required": false}]]
2025-05-18 00:40:48.743 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [merge_monitor]
2025-05-18 00:40:48.743 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_merge_progress]
2025-05-18 00:40:48.743 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [merge_monitor]
2025-05-18 00:40:48.743 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_major_freeze_status]
2025-05-18 00:40:48.743 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:48.743 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_merge_error]
2025-05-18 00:40:48.743 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:48.743 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:48.744 [pool-9-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:48.744 [pool-9-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:48.744 [pool-9-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:48.744 [pool-9-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_merge_error]
2025-05-18 00:40:48.744 [pool-9-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_major_freeze_status]
2025-05-18 00:40:48.744 [pool-9-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_merge_progress]
2025-05-18 00:40:48.896 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [28]
2025-05-18 00:40:48.896 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [26]
2025-05-18 00:40:48.896 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [30]
2025-05-18 00:40:48.896 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, frozen_time, global_broadcast_scn, is_merging, merge_start_time, merge_finish_time, is_error, error_type FROM oceanbase.__all_merge_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) ORDER BY frozen_time DESC LIMIT 10]
2025-05-18 00:40:48.896 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, error_type, error_msg, error_time FROM oceanbase.__all_merge_error WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (error_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY error_time DESC]
2025-05-18 00:40:48.896 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_merge_progress]
2025-05-18 00:40:48.896 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, frozen_time, status FROM oceanbase.__all_major_freeze_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) ORDER BY frozen_time DESC LIMIT 10]
2025-05-18 00:40:48.896 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:48.896 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_major_freeze_status]
2025-05-18 00:40:48.896 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_merge_error]
2025-05-18 00:40:48.896 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:48.896 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:48.896 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [27]
2025-05-18 00:40:48.896 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [29]
2025-05-18 00:40:48.896 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [25]
2025-05-18 00:40:48.896 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, error_type, error_msg, error_time FROM oceanbase.gv$merge_error WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND (error_time BETWEEN IFNULL(:start_time, DATE_SUB(NOW(), INTERVAL 7 DAY)) AND IFNULL(:end_time, NOW()) OR :start_time IS NULL) ORDER BY error_time DESC]
2025-05-18 00:40:48.896 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, frozen_time, global_broadcast_scn, is_merging, merge_start_time, merge_finish_time, is_error, error_type FROM oceanbase.gv$merge_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) ORDER BY frozen_time DESC LIMIT 10]
2025-05-18 00:40:48.896 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_merge_error]
2025-05-18 00:40:48.896 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, frozen_scn, frozen_time, status FROM oceanbase.gv$major_freeze_info WHERE tenant_id = IFNULL(:tenant_id, tenant_id) ORDER BY frozen_time DESC LIMIT 10]
2025-05-18 00:40:48.896 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_merge_progress]
2025-05-18 00:40:48.896 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_major_freeze_status]
2025-05-18 00:40:48.896 [pool-9-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:48.896 [pool-9-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:48.896 [pool-9-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:48.897 [pool-9-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_major_freeze_status 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:48.897 [pool-9-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_merge_error 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:48.897 [pool-9-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_merge_progress 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:49.072 [http-nio-8080-exec-9] INFO  c.o.q.api.controller.QueryController - Received request to execute query for scene: tenant_resource_usage, async: false
2025-05-18 00:40:49.151 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select queryscene0_.id as id1_2_, queryscene0_.create_time as create_t2_2_, queryscene0_.description as descript3_2_, queryscene0_.scene_code as scene_co4_2_, queryscene0_.scene_name as scene_na5_2_, queryscene0_.template_ids as template6_2_ from query_scene queryscene0_ where queryscene0_.scene_code=?
2025-05-18 00:40:49.151 [http-nio-8080-exec-9] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [tenant_resource_usage]
2025-05-18 00:40:49.275 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_2_] : [BIGINT]) - [5]
2025-05-18 00:40:49.275 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_2_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:49.275 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript3_2_] : [CLOB]) - [监控 OceanBase 租户的资源使用情况，包括 CPU、内存、磁盘等]
2025-05-18 00:40:49.275 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co4_2_] : [VARCHAR]) - [tenant_resource_usage]
2025-05-18 00:40:49.275 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_na5_2_] : [VARCHAR]) - [租户资源使用]
2025-05-18 00:40:49.275 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template6_2_] : [CLOB]) - [["ob_tenant_cpu_usage", "ob_tenant_memory_usage", "ob_tenant_disk_usage"]]
2025-05-18 00:40:49.276 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select datasource0_.id as id1_1_, datasource0_.create_time as create_t2_1_, datasource0_.datasource_id as datasour3_1_, datasource0_.db_type as db_type4_1_, datasource0_.extra_config as extra_co5_1_, datasource0_.password as password6_1_, datasource0_.update_time as update_t7_1_, datasource0_.url as url8_1_, datasource0_.username as username9_1_ from datasource_config datasource0_ where datasource0_.datasource_id=?
2025-05-18 00:40:49.276 [http-nio-8080-exec-9] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob-cluster-prod]
2025-05-18 00:40:49.360 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_1_] : [BIGINT]) - [1]
2025-05-18 00:40:49.360 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:49.360 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([datasour3_1_] : [VARCHAR]) - [ob-cluster-prod]
2025-05-18 00:40:49.360 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type4_1_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:49.360 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([extra_co5_1_] : [CLOB]) - [{"ssl": false, "connectTimeout": 5000}]
2025-05-18 00:40:49.360 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([password6_1_] : [VARCHAR]) - [OceanBase_123#]
2025-05-18 00:40:49.360 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t7_1_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:49.360 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([url8_1_] : [VARCHAR]) - [jdbc:oceanbase://obmt6a2ewvdhoj1c.huawei-cn-north-4-internet.oceanbase.cloud:3306/bx]
2025-05-18 00:40:49.360 [http-nio-8080-exec-9] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([username9_1_] : [VARCHAR]) - [bx]
2025-05-18 00:40:50.102 [pool-10-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:50.102 [pool-10-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:50.102 [pool-10-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_3_, sqltemplat0_.create_time as create_t2_3_, sqltemplat0_.db_type as db_type3_3_, sqltemplat0_.description as descript4_3_, sqltemplat0_.parameters as paramete5_3_, sqltemplat0_.scene_code as scene_co6_3_, sqltemplat0_.template_id as template7_3_, sqltemplat0_.update_time as update_t8_3_ from sql_template sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:50.166 [pool-10-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_memory_usage]
2025-05-18 00:40:50.166 [pool-10-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_cpu_usage]
2025-05-18 00:40:50.166 [pool-10-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_disk_usage]
2025-05-18 00:40:50.213 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [17]
2025-05-18 00:40:50.213 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [16]
2025-05-18 00:40:50.213 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_3_] : [BIGINT]) - [18]
2025-05-18 00:40:50.213 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:50.213 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:50.213 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([create_t2_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:50.213 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:50.213 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:50.213 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([db_type3_3_] : [VARCHAR]) - [OCEANBASE]
2025-05-18 00:40:50.213 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 租户 CPU 使用情况]
2025-05-18 00:40:50.213 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 租户内存使用情况]
2025-05-18 00:40:50.213 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([descript4_3_] : [CLOB]) - [查询 OceanBase 租户磁盘使用情况]
2025-05-18 00:40:50.213 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "tenant_name", "type": "string", "required": false}]]
2025-05-18 00:40:50.213 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "tenant_name", "type": "string", "required": false}]]
2025-05-18 00:40:50.213 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [tenant_resource_usage]
2025-05-18 00:40:50.213 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([paramete5_3_] : [CLOB]) - [[{"name": "tenant_id", "type": "integer", "required": false}, {"name": "tenant_name", "type": "string", "required": false}]]
2025-05-18 00:40:50.213 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [tenant_resource_usage]
2025-05-18 00:40:50.213 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([scene_co6_3_] : [VARCHAR]) - [tenant_resource_usage]
2025-05-18 00:40:50.213 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_tenant_disk_usage]
2025-05-18 00:40:50.213 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_tenant_cpu_usage]
2025-05-18 00:40:50.213 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template7_3_] : [VARCHAR]) - [ob_tenant_memory_usage]
2025-05-18 00:40:50.213 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:50.213 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:50.214 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([update_t8_3_] : [TIMESTAMP]) - [null]
2025-05-18 00:40:50.214 [pool-10-thread-3] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:50.214 [pool-10-thread-2] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:50.214 [pool-10-thread-1] DEBUG org.hibernate.SQL - select sqltemplat0_.id as id1_4_, sqltemplat0_.sql_text as sql_text2_4_, sqltemplat0_.template_id as template3_4_, sqltemplat0_.version_condition as version_4_4_ from sql_template_version sqltemplat0_ where sqltemplat0_.template_id=?
2025-05-18 00:40:50.214 [pool-10-thread-3] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_disk_usage]
2025-05-18 00:40:50.214 [pool-10-thread-2] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_memory_usage]
2025-05-18 00:40:50.214 [pool-10-thread-1] TRACE o.h.type.descriptor.sql.BasicBinder - binding parameter [1] as [VARCHAR] - [ob_tenant_cpu_usage]
2025-05-18 00:40:50.267 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [32]
2025-05-18 00:40:50.267 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [34]
2025-05-18 00:40:50.267 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [36]
2025-05-18 00:40:50.267 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, cpu_quota, cpu_used, cpu_used/cpu_quota*100 as cpu_usage_percent FROM oceanbase.__all_tenant_cpu_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY cpu_usage_percent DESC]
2025-05-18 00:40:50.267 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, memory_quota, memory_used, memory_used/memory_quota*100 as memory_usage_percent FROM oceanbase.__all_tenant_memory_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY memory_usage_percent DESC]
2025-05-18 00:40:50.267 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, disk_quota, disk_used, disk_used/disk_quota*100 as disk_usage_percent FROM oceanbase.__all_tenant_disk_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY disk_usage_percent DESC]
2025-05-18 00:40:50.267 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_cpu_usage]
2025-05-18 00:40:50.267 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_memory_usage]
2025-05-18 00:40:50.267 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:50.267 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_disk_usage]
2025-05-18 00:40:50.267 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:50.267 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [31]
2025-05-18 00:40:50.267 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [<4.0.0]
2025-05-18 00:40:50.267 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [33]
2025-05-18 00:40:50.267 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, cpu_quota, cpu_used, cpu_used/cpu_quota*100 as cpu_usage_percent FROM oceanbase.gv$tenant_cpu_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY cpu_usage_percent DESC]
2025-05-18 00:40:50.267 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([id1_4_] : [BIGINT]) - [35]
2025-05-18 00:40:50.267 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_cpu_usage]
2025-05-18 00:40:50.267 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, memory_quota, memory_used, memory_used/memory_quota*100 as memory_usage_percent FROM oceanbase.gv$tenant_memory_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY memory_usage_percent DESC]
2025-05-18 00:40:50.267 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([sql_text2_4_] : [CLOB]) - [SELECT tenant_id, tenant_name, svr_ip, disk_quota, disk_used, disk_used/disk_quota*100 as disk_usage_percent FROM oceanbase.gv$tenant_disk_usage WHERE tenant_id = IFNULL(:tenant_id, tenant_id) AND tenant_name = IFNULL(:tenant_name, tenant_name) ORDER BY disk_usage_percent DESC]
2025-05-18 00:40:50.267 [pool-10-thread-1] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:50.267 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_disk_usage]
2025-05-18 00:40:50.267 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([template3_4_] : [VARCHAR]) - [ob_tenant_memory_usage]
2025-05-18 00:40:50.267 [pool-10-thread-3] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:50.267 [pool-10-thread-2] TRACE o.h.t.descriptor.sql.BasicExtractor - extracted value ([version_4_4_] : [VARCHAR]) - [>=4.0.0]
2025-05-18 00:40:50.267 [pool-10-thread-1] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_tenant_cpu_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:50.267 [pool-10-thread-3] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_tenant_disk_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:40:50.267 [pool-10-thread-2] ERROR c.o.q.a.s.impl.QueryServiceImpl - 执行SQL模板 ob_tenant_memory_usage 失败: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'tenant_id': No value registered for key 'tenant_id'
	at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray(NamedParameterUtils.java:366)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:428)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator(NamedParameterJdbcTemplate.java:402)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:212)
	at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList(NamedParameterJdbcTemplate.java:306)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.executeSingleTemplate(QueryServiceImpl.java:239)
	at com.oceanbase.query.api.service.impl.QueryServiceImpl.lambda$executeSceneQuerySync$0(QueryServiceImpl.java:147)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-05-18 00:52:24.738 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 00:52:24.740 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Shutdown initiated...
2025-05-18 00:52:24.741 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MetadataHikariPool - Shutdown completed.
